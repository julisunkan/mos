<!DOCTYPE html>
<html>
<head>
    <title>Receipt {{ sale.receipt_number }}</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            color: black;
            background: white;
        }
        .receipt-content {
            max-width: 300px;
            margin: 0 auto;
        }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .border-top { border-top: 1px dashed #000; margin-top: 10px; padding-top: 10px; }
        .mb-2 { margin-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 2px 0; }
        .item-row td { border-bottom: 1px dotted #ccc; }
    </style>
</head>
<body>
    <div class="receipt-content">
        <div class="text-center mb-2">
            <h3>{{ sale.store.name }}</h3>
            <p>{{ sale.store.address or '' }}<br>
               {{ sale.store.phone or '' }}</p>
        </div>
        
        <div class="text-center border-top mb-2">
            <strong>RECEIPT #{{ sale.receipt_number }}</strong><br>
            {{ sale.created_at.strftime('%Y-%m-%d %H:%M:%S') }}
        </div>
        
        <table>
            <thead>
                <tr>
                    <th style="text-align: left;">Item</th>
                    <th>Qty</th>
                    <th style="text-align: right;">Price</th>
                    <th style="text-align: right;">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in sale.sale_items %}
                <tr class="item-row">
                    <td>{{ item.product.name }}</td>
                    <td style="text-align: center;">{{ item.quantity }}</td>
                    <td style="text-align: right;">{{ item.unit_price|format_currency }}</td>
                    <td style="text-align: right;">{{ item.total_price|format_currency }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <div class="border-top">
            <table>
                <tr>
                    <td>Subtotal:</td>
                    <td class="text-right">{{ sale.subtotal|format_currency }}</td>
                </tr>
                <tr>
                    <td>Tax:</td>
                    <td class="text-right">{{ sale.tax_amount|format_currency }}</td>
                </tr>
                <tr style="font-weight: bold; font-size: 1.1em;">
                    <td>TOTAL:</td>
                    <td class="text-right">{{ sale.total_amount|format_currency }}</td>
                </tr>
            </table>
        </div>
        
        <div class="text-center border-top">
            <p>Payment Method: {{ sale.payment_method|title }}</p>
            {% if sale.customer %}
            <p>Customer: {{ sale.customer.name }}</p>
            {% endif %}
            <p>Served by: {{ sale.user.full_name }}</p>
        </div>
        
        <div class="text-center">
            <p>Thank you for your business!</p>
        </div>
    </div>
</body>
</html>